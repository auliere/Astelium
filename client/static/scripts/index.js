"use strict";function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},AudioManager=function(){function e(e){this._audioMap=e||new Map([])}return Object.defineProperty(e.prototype,"audioMap",{get:function(){return this._audioMap},set:function(e){this._audioMap=e},enumerable:!0,configurable:!0}),e.prototype.load=function(e){var t=this;e.forEach(function(e){t.audioMap.set(e,new Audio(e))})},e.prototype.play=function(e,t){var n=this.audioMap.get(e);n.loop=t,n.play()},e.prototype.playSelected=function(e){this.audioMap.forEach(function(t,n){console.log(e,n),e.includes(n)?t.play():t.pause()})},e.prototype.stopAll=function(){this.audioMap.forEach(function(e){e.played&&e.pause()})},e.prototype.stopAllExceptSelected=function(e){this.audioMap.forEach(function(t,n){e.includes(n)&&t.played&&t.pause()})},e}(),Model=function(){function e(e,t){this.EmptyHTMLTemplate="<div>Empty model</div>",this._HTMLTemplate=e||this.EmptyHTMLTemplate,this._audioManager=t||new AudioManager([])}return Object.defineProperty(e.prototype,"HTMLTemplate",{get:function(){return this._HTMLTemplate},set:function(e){this._HTMLTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioManager",{get:function(){return this._audioManager},set:function(e){this._audioManager=e},enumerable:!0,configurable:!0}),e}(),Menu=function(e){function t(t,n,o){var i=e.call(this,t,n)||this;return i._actionItems=o||new Map([["Item1",function(){console.log("Item 1 was chosen")}],["Item2",function(){console.log("Item 2 was chosen")}],["Item3",function(){console.log("Item 3 was chosen")}]]),i}return __extends(t,e),Object.defineProperty(t.prototype,"actionItems",{get:function(){return this._actionItems},set:function(e){this._actionItems=e},enumerable:!0,configurable:!0}),t}(Model),Layout=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutSelector="ast-layout",t}return __extends(t,e),t.prototype.build=function(e){this.HTMLTemplate='<div id="'+this.layoutSelector+'"></div>',e?document.querySelector("#"+e).innerHTML=this.HTMLTemplate:document.querySelector("body").innerHTML=this.HTMLTemplate,this.audioManager.playSelected(["/location.mp3"])},t}(Model),MainMenu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menuSelector="ast-main-menu",t}return __extends(t,e),t.prototype.build=function(e){var t=this;this.HTMLTemplate='<div id="'+this.menuSelector+'"></div>',this.audioManager.play("/menu.mp3",!0),this.actionItems=new Map([["New game",function(){t.initializeView("#"+t.menuSelector,t.getNewGameItems()),t.audioManager.play("/newgame.mp3"),console.log("New game")}],["Options",function(){t.audioManager.play("/options.mp3"),console.log("Options")}],["Exit",function(){console.log("Exit")}]]),document.querySelector(""+e).innerHTML=this.HTMLTemplate,this.initializeView("#"+this.menuSelector,this.actionItems)},t.prototype.getNewGameItems=function(){var e=this;return new Map([["SinglePlayer",function(){e.audioManager.play("/singleplayer.mp3"),new Layout("",e.audioManager).build(),console.log("Single")}],["Multiplayer",function(){e.audioManager.play("/multiplayer.mp3"),console.log("Multi")}],["Back",function(){console.log("Back"),e.initializeView("#"+e.menuSelector,e.actionItems)}]])},t.prototype.initializeView=function(e,t){var n="";t.forEach(function(e,t){var o='<div class="action-item" id="action-'+t.substring(0,3)+'">\n                <button>'+t+"</button>\n            </div>";n+=o}),document.querySelector(e).innerHTML=n,this.registerEvents(t)},t.prototype.registerEvents=function(e){e.forEach(function(e,t){document.querySelector("#action-"+t.substring(0,3)).addEventListener("click",e)})},t}(Menu);document.addEventListener("DOMContentLoaded",function(){console.log("Document was loaded");var e=new AudioManager;e.load(["/location.mp3","/menu.mp3","/multiplayer.mp3","/newgame.mp3","/options.mp3","/singleplayer.mp3"]),new MainMenu(null,e).build("#renderTarget")});
